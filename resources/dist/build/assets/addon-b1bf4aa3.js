function h(i,e,t,s,a,r,c,u){var n=typeof i=="function"?i.options:i;e&&(n.render=e,n.staticRenderFns=t,n._compiled=!0),s&&(n.functional=!0),r&&(n._scopeId="data-v-"+r);var l;if(c?(l=function(o){o=o||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!o&&typeof __VUE_SSR_CONTEXT__<"u"&&(o=__VUE_SSR_CONTEXT__),a&&a.call(this,o),o&&o._registeredComponents&&o._registeredComponents.add(c)},n._ssrRegister=l):a&&(l=u?function(){a.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(n.functional){n._injectStyles=l;var f=n.render;n.render=function(_,d){return l.call(d),f(_,d)}}else{var p=n.beforeCreate;n.beforeCreate=p?[].concat(p,l):[l]}return{exports:i,options:n}}const m={props:["collections","fileTypes"],data(){return{collectionHandle:null,fileType:"xlsx",headers:!0,errors:{}}},computed:{collectionOptions(){return this.collections.map(i=>({label:i.title,value:i.handle}))},fileTypeOptions(){return this.fileTypes.map(i=>({label:i.toUpperCase(),value:i}))}},methods:{submit(){this.errors={},fetch("/!/statamic-export/export",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('input[name="_token"]').value},body:JSON.stringify({collection_handle:this.collectionHandle,file_type:this.fileType,headers:this.headers})}).then(i=>i.ok?i.blob():i.json().then(e=>Promise.reject(e))).then(i=>{const e=window.URL.createObjectURL(i),t=document.createElement("a");t.href=e,t.download=`${this.collectionHandle}.${this.fileType}`,document.body.appendChild(t),t.click(),t.remove()}).catch(i=>this.errors=i.errors)}}};var v=function(){var e=this,t=e._self._c;return t("div",[e._m(0),t("div",{staticClass:"card"},[t("form",{on:{submit:function(s){return s.preventDefault(),e.submit.apply(null,arguments)}}},[e._t("csrf"),t("div",{staticClass:"lg:flex gap-3 mb-4"},[t("div",{staticClass:"select-input-container relative w-full my-4"},[t("label",{staticClass:"mb-2 whitespace-nowrap",attrs:{for:"collection_handle"}},[e._v("Collection")]),t("select-input",{attrs:{options:e.collectionOptions},model:{value:e.collectionHandle,callback:function(s){e.collectionHandle=s},expression:"collectionHandle"}}),e.errors.collection_handle?t("p",{staticClass:"text-red-500 text-xs mt-1"},[e._v(" "+e._s(e.errors.collection_handle[0])+" ")]):e._e()],1),t("div",{staticClass:"select-input-container my-4"},[t("label",{staticClass:"mb-2 whitespace-nowrap",attrs:{for:"file_type"}},[e._v("File Type")]),t("select-input",{staticStyle:{"min-width":"150px"},attrs:{options:e.fileTypeOptions,id:"file_type"},model:{value:e.fileType,callback:function(s){e.fileType=s},expression:"fileType"}})],1),t("div",{staticClass:"my-4",staticStyle:{"min-width":"150px"}},[t("label",{attrs:{for:"headers"}},[t("div",{staticClass:"whitespace-nowrap"},[e._v("Include Headers")]),t("toggle-input",{attrs:{id:"headers"},model:{value:e.headers,callback:function(s){e.headers=s},expression:"headers"}})],1)])]),t("button",{staticClass:"btn-primary",attrs:{type:"submit"}},[e._v(e._s(e.__("Export collection")))])],2)])])},y=[function(){var i=this,e=i._self._c;return e("div",{staticClass:"mb-6"},[e("h1",{staticClass:"mb-2"},[i._v("Export")]),e("p",{staticClass:"text-sm text-gray"},[i._v(" Choose the collection you'd like to export, pick your preferred file type and you're ready to go. It really is that easy. ")])])}],C=h(m,v,y,!1,null,null,null,null);const b=C.exports;Statamic.booting(()=>{Statamic.$components.register("export",b)});
