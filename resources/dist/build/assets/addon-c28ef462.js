function h(i,e,t,a,o,r,c,f){var l=typeof i=="function"?i.options:i;e&&(l.render=e,l.staticRenderFns=t,l._compiled=!0),a&&(l.functional=!0),r&&(l._scopeId="data-v-"+r);var s;if(c?(s=function(n){n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!n&&typeof __VUE_SSR_CONTEXT__<"u"&&(n=__VUE_SSR_CONTEXT__),o&&o.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(c)},l._ssrRegister=s):o&&(s=f?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),s)if(l.functional){l._injectStyles=s;var u=l.render;l.render=function(_,p){return s.call(p),u(_,p)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,s):[s]}return{exports:i,options:l}}const m={props:["collections","fileTypes"],data(){return{collectionHandle:null,fileType:"xlsx",headers:!0,errors:{},loading:!1}},computed:{collectionOptions(){return this.collections.map(i=>({label:i.title,value:i.handle}))},fileTypeOptions(){return this.fileTypes.map(i=>({label:i.toUpperCase(),value:i}))}},methods:{submit(){this.loading=!0,this.errors={},fetch("/!/statamic-export/export",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('input[name="_token"]').value},body:JSON.stringify({collection_handle:this.collectionHandle,file_type:this.fileType,headers:this.headers})}).then(i=>i.ok?i.blob():i.json().then(e=>Promise.reject(e))).then(i=>{const e=window.URL.createObjectURL(i),t=document.createElement("a");t.href=e,t.download=`${this.collectionHandle}.${this.fileType}`,document.body.appendChild(t),t.click(),t.remove()}).catch(i=>this.errors=i.errors).finally(()=>this.loading=!1)}}};var v=function(){var e=this,t=e._self._c;return t("div",[e._m(0),t("div",{staticClass:"card"},[t("form",{on:{submit:function(a){return a.preventDefault(),e.submit.apply(null,arguments)}}},[e._t("csrf"),t("div",{staticClass:"lg:flex gap-3 mb-4"},[t("div",{staticClass:"select-input-container relative w-full"},[t("label",{staticClass:"mb-2 whitespace-nowrap",attrs:{for:"collection_handle"}},[e._v("Collection")]),t("select-input",{attrs:{options:e.collectionOptions},model:{value:e.collectionHandle,callback:function(a){e.collectionHandle=a},expression:"collectionHandle"}}),e.errors.collection_handle?t("p",{staticClass:"text-red-500 text-xs mt-1"},[e._v(" "+e._s(e.errors.collection_handle[0])+" ")]):e._e()],1),t("div",{staticClass:"select-input-container"},[t("label",{staticClass:"mb-2 whitespace-nowrap",attrs:{for:"file_type"}},[e._v("File Type")]),t("select-input",{staticStyle:{"min-width":"150px"},attrs:{options:e.fileTypeOptions,id:"file_type"},model:{value:e.fileType,callback:function(a){e.fileType=a},expression:"fileType"}})],1),t("div",{staticStyle:{"min-width":"150px"}},[t("label",{attrs:{for:"headers"}},[t("div",{staticClass:"whitespace-nowrap"},[e._v("Include Headers")]),t("toggle-input",{attrs:{id:"headers"},model:{value:e.headers,callback:function(a){e.headers=a},expression:"headers"}})],1)])]),t("div",{staticClass:"flex"},[t("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:e.loading}},[e._v(e._s(e.__("Export collection")))]),e.loading?t("loading-graphic",{staticClass:"ml-4",attrs:{inline:""}}):e._e()],1)],2)])])},y=[function(){var i=this,e=i._self._c;return e("div",{staticClass:"mb-6"},[e("h1",{staticClass:"mb-2"},[i._v("Export")]),e("p",{staticClass:"text-sm text-gray"},[i._v(" Choose the collection you'd like to export, pick your preferred file type and you're ready to go. It really is that easy. ")])])}],C=h(m,v,y,!1,null,null,null,null);const b=C.exports;Statamic.booting(()=>{Statamic.$components.register("export",b)});
